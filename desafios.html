<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desafíos - DataFit</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">

    <link rel="stylesheet" href="css/desafios-style.css">
</head>
<body>

    <nav class="nav-bar_Home">
        <div class="logo_Home">
            <a href="index_home.html" style="display: flex; align-items: center; text-decoration: none; color: inherit;">
                <img src="assets/icons/logo-datafit.png" alt="Logo Data Fit" class="logo-icon_Home">
                <span class="logo-text_Home">Data Fit</span>
            </a>
        </div>
    
        <ul class="menu_Home">
            <li><a href="index_home.html" class="nav-link_Home"><i class="fas fa-home icon-nav_Home"></i> INICIO</a></li>
            <li><a href="rutinas.html" class="nav-link_Home"><i class="fas fa-dumbbell icon-nav_Home"></i> RUTINAS</a></li>
            <li><a href="desafios.html" class="nav-link_Home active_Home"><i class="fas fa-trophy icon-nav_Home"></i> DESAFÍOS</a></li>
            <li><a href="progreso.html" class="nav-link_Home"><i class="fas fa-chart-line icon-nav_Home"></i> PROGRESO</a></li>
        </ul>
    
        <div class="actions_Home">
            <a href="notificaciones.html" title="Notificaciones"><i class="fas fa-bell notification-icon_Home"></i></a>
            <a href="configuracion.html" title="Configuración"><i class="fas fa-cog settings-icon_Home"></i></a>
        </div>
    </nav>

    <div class="main-bar">
        <div class="main-group">
            <a href="index_home.html" class="back-button" title="Volver al inicio">
                <img src="assets/arrow_back.svg" alt="Volver"/>
            </a>
            <h2 class="top-title">Mis desafíos</h2>
        </div>
        <div class="main-group">
            <div class="main_challenges">
                <img src="assets/menu.svg" class="menu-icon" alt="Menú"/>
                <input type="text" placeholder="Desafíos recomendados" class="search-input"/>
                <img src="assets/search.svg" class="search-icon" alt="Buscar"/>
            </div>
            <a href="#" class="create-challenge-button">
                <img src="assets/plus.svg" alt="Crear"/>
                <p>Crear desafío</p>
            </a>
        </div>
    </div>

    <div class="content">
        <div class="content-group">
            <h2 class="content-title">Favoritos</h2>
            <div class="challenges-container">
                <div class="challenge-card">
                    <div class="challenge-header">
                        <p class="challenge-text">Completa 3 días</p>
                        <div class="challenge-options">
                            <img src="assets/star.svg" class="favorite-toggle-icon" data-favorite="true" alt="Favorito"/>
                            <img src="assets/edit.svg" alt="Editar"/>
                            <img src="assets/trash.svg" alt="Borrar"/>
                        </div>
                    </div>
                    <div class="challenge-body">
                        <p>Completa 3 días de rutinas</p>
                    </div>
                    <button class="challenge-button">marcar como completado</button>
                </div>
                <div class="challenge-card">
                    <div class="challenge-header">
                        <p class="challenge-text">Meditación profunda</p>
                        <div class="challenge-options">
                            <img src="assets/star.svg" class="favorite-toggle-icon" data-favorite="true" alt="Favorito"/>
                            <img src="assets/edit.svg" alt="Editar"/>
                            <img src="assets/trash.svg" alt="Borrar"/>
                        </div>
                    </div>
                    <div class="challenge-body">
                        <p>Medita por 1 minuto</p>
                    </div>
                    <button class="challenge-button">marcar como completado</button>
                </div>
            </div>
        </div>
        <div class="content-group">
            <h2 class="content-title">Activos</h2>
            <div class="challenges-container-actives">
                <div class="challenge-card">
                    <div class="challenge-header">
                        <p class="challenge-text">Lectura diaria</p>
                        <div class="challenge-options">
                            <img src="assets/unstar.svg" class="favorite-toggle-icon" data-favorite="false" alt="No Favorito"/>
                            <img src="assets/edit.svg" alt="Editar"/>
                            <img src="assets/trash.svg" alt="Borrar"/>
                        </div>
                    </div>
                    <div class="challenge-body">
                        <p>Lee por 10 minutos</p>
                    </div>
                    <button class="challenge-button">marcar como completado</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var favoriteContainer = document.querySelector(".challenges-container");
            var activeContainer = document.querySelector(".challenges-container-actives");

            function updateIcon(icon, isFavorite) {
                icon.src = isFavorite ? "assets/star.svg" : "assets/unstar.svg";
                icon.dataset.favorite = isFavorite.toString();
            }

            function handleToggleFavorite(e) {
                var target = e.target;
                if (!target.classList.contains("favorite-toggle-icon")) return;

                var icon = target;
                var isFavorite = icon.dataset.favorite === "true";
                var card = icon.closest(".challenge-card");
                if (!card) return;
                
                // Mover el card al contenedor opuesto
                if (isFavorite) {
                    // De favoritos a activos
                    updateIcon(icon, false);
                    activeContainer.appendChild(card);
                } else {
                    // De activos a favoritos
                    updateIcon(icon, true);
                    favoriteContainer.appendChild(card);
                }
            }
            
            document.body.addEventListener("click", handleToggleFavorite);
        });
    </script>
</body>
</html>
